@(passwordChangeForm: Form[controllers.auth.ChangeInfo], userContext: Option[models.entities.UserContext])(implicit request: be.studiocredo.auth.SecureRequest[_])
@import helper._
@import views.Bootstrap._

@base("Change Password")(userContext) {
    <div class="page-header">
        <h1>Change Password</h1>
    </div>

    @request.flash.get("error").map { msg =>
        <div class="alert alert-danger">
            @msg
        </div>
    }

    @if(request.flash.get("success").isDefined) {
        <div class="alert alert-info">
        @request.flash.get("success").get
        </div>

        @twFormActions {
            <a class="btn" href="@routes.Application.index()">Your password was changed successfully</a>
        }
    } else {
        @form(action = controllers.auth.routes.PasswordChange.handlePasswordChange(), 'class -> "form form-horizontal") {
            @globalFormErrors(passwordChangeForm)
            <fieldset>
                @helper.inputPassword(
                    passwordChangeForm("current"),
                    '_label -> "Current Password",
                    'class -> "form-control"
                )

                @helper.inputPassword(
                    passwordChangeForm("password.password"),
                    '_label -> "New Password",
                    'class -> "form-control"
                )

                @helper.inputPassword(
                    passwordChangeForm("password.confirmation"),
                    '_label -> "New Password Confirmation",
                    '_error -> passwordChangeForm.error("password"),
                    'class -> "form-control"
                )
            </fieldset>
            @twFormActions {
                <button type="submit" class="btn btn-primary">Change</button>
            }
        }
    }
}
