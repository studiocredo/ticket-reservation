@(info: models.admin.EventPrereservationsDetail, prereservationForm: Form[controllers.PrereservationForm], userContext: Option[models.entities.UserContext])(implicit request: be.studiocredo.auth.SecureRequest[_], lang: Lang)
@import helper._

@base("Pre-reservatie " + info.event.name, helper.counterScripts())(userContext) {

<div class="page-header">
    <h1>Pre-reservatie @info.event.name </h1>
</div>

@request.flash.get("error").map { msg =>
<div class="alert alert-danger">
    @msg
</div>
}

@if(!info.shows.isEmpty) {
    @form(action = controllers.routes.Prereservations.save(info.event.id), 'class -> "form form-horizontal") {

        @globalFormErrors(prereservationForm)
        <fieldset>

            @if(!info.users.isEmpty) {
                @formControlStatic("Gekoppelde gebruikers") {
                    @info.users.map { user =>
                        <a href="#" class="btn btn-default btn-xs" role="button">@user.name</a>
                    }
                }

                @formControlStatic("Totaal aantal pre-reservaties") { @info.totalQuota }
            }


            @for(((venue, show), index) <- info.shows.map{ vs => vs.shows.map{(vs.venue, _)}}.flatten.zipWithIndex) {
                @counterInput(prereservationForm(s"preres[$index].quantity"), '_label -> s"${HumanDateTime.formatDateTime(show.date)} @ ${venue.name}",  'max -> info.totalQuota, 'class -> "form-control")
                @hiddenInput(prereservationForm(s"preres[$index].show"))
            }
        </fieldset>

        @twFormActions {
            <button type="submit" class="btn btn-primary">Bewaren</button>
            <a class="btn btn-warning" href="@controllers.routes.Application.index">Annuleren</a>
        }
    }

} else {
<div class="well">
    <p><em>Geen voorstellingen gevonden voor dit evenement.</em></p>
    @form(routes.Application.index) {
    <input type="submit" value="Annuleren" class="btn btn-warning">
    }
</div>
}

}
